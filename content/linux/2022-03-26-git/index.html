---
title: 玩转 Git
author: 王哲峰
date: '2022-03-26'
slug: git
categories:
  - Linux
tags:
  - tool
output:
  blogdown::html_page:
    toc: true
    fig_width: 6
    dev: "svg"
---

<script src="{{< blogdown/postref >}}index_files/header-attrs/header-attrs.js"></script>

<div id="TOC">
<ul>
<li><a href="#git-flow">Git flow</a>
<ul>
<li><a href="#创建一个分支create-a-branch">1.创建一个分支(create a branch)</a></li>
<li><a href="#添加提交add-commit">2.添加提交(Add commit)</a></li>
<li><a href="#开一个拉取请求open-a-pull-request">3.开一个拉取请求(Open a Pull Request)</a></li>
<li><a href="#讨论和审核代码discuss-and-review-your-code">4.讨论和审核代码(Discuss and review your code)</a></li>
<li><a href="#部署-deploy">5.部署 (Deploy)</a></li>
<li><a href="#合并merge">6.合并(Merge)</a></li>
</ul></li>
<li><a href="#git-repository-管理">Git Repository 管理</a>
<ul>
<li><a href="#git-下载-repo.zip-并关联到-github-remote">1.Git 下载 repo.zip 并关联到 GitHub remote</a></li>
<li><a href="#git-httphttps-ssh">2.Git http/https ⇒ SSH</a></li>
</ul></li>
<li><a href="#cloning-with-ssh-urls">Cloning with SSH URLs</a>
<ul>
<li><a href="#introductio">1.Introductio</a></li>
<li><a href="#connecting-to-github-with-ssh">2.Connecting to GitHub with SSH</a>
<ul>
<li><a href="#关于-ssh">2.1 关于 SSH</a></li>
<li><a href="#检查本地是否已有-ssh-keys">2.2 检查本地是否已有 SSH keys</a></li>
<li><a href="#生成一个新的-ssh-key-并把生成的-ssh-key-加入-ssh-agent">2.3 生成一个新的 SSH key 并把生成的 SSH key 加入 ssh-agent</a></li>
<li><a href="#将-ssh-key-加入-github-账号">2.4 将 SSH key 加入 GitHub 账号</a></li>
<li><a href="#测试-ssh-连接">2.5 测试 SSH 连接</a></li>
<li><a href="#使用-ssh-passphrases-工作">2.6 使用 SSH passphrases 工作</a></li>
</ul></li>
</ul></li>
<li><a href="#git-基础知识">Git 基础知识</a>
<ul>
<li><a href="#安装-gitmac">1.安装 Git(Mac)</a></li>
<li><a href="#创建-ssh-key">2.创建 SSH Key</a></li>
<li><a href="#git-配置">3.Git 配置</a>
<ul>
<li><a href="#配置-git">3.1 配置 Git</a></li>
<li><a href="#git-配置文件">3.2 Git 配置文件</a></li>
<li><a href="#检查-git-配置信息">3.3 检查 Git 配置信息</a></li>
</ul></li>
<li><a href="#获取帮助">4.获取帮助</a></li>
<li><a href="#git-工作流程">5.Git 工作流程</a>
<ul>
<li><a href="#创建-git仓库2种">5.1 创建 Git仓库(2种)</a></li>
<li><a href="#添加版本库中的文件到暂存区">5.2 添加版本库中的文件到暂存区</a></li>
<li><a href="#把暂存区的所有内容提交到当前分支">5.3 把暂存区的所有内容提交到当前分支</a></li>
<li><a href="#把一个已有的本地仓库和远程git库关联">5.4 把一个已有的本地仓库和远程git库关联</a></li>
<li><a href="#把本地库的内容推送到远程把当前分支推送到远程">5.5 把本地库的内容推送到远程(把当前分支推送到远程)</a></li>
<li><a href="#从远程分支拉取最新的版本到本地并合并">5.6 从远程分支拉取最新的版本到本地并合并</a></li>
</ul></li>
<li><a href="#查看当前信息">6.查看当前信息</a>
<ul>
<li><a href="#查看当前文件状态">6.1 查看当前文件状态</a></li>
<li><a href="#查看已暂存和未暂存的修改">6.2 查看已暂存和未暂存的修改</a></li>
<li><a href="#查看工作区和版本库里最新版本的区别">6.3 查看工作区和版本库里最新版本的区别</a></li>
</ul></li>
<li><a href="#移除文件从暂存区域移除">7.移除文件(从暂存区域移除)</a>
<ul>
<li><a href="#确定要从版本库中删除文件">7.1 确定要从版本库中删除文件</a></li>
<li><a href="#误删工作区文件-将版本库中的文件替换工作取得文件">7.2 误删工作区文件, 将版本库中的文件替换工作取得文件</a></li>
</ul></li>
<li><a href="#版本回退">8.版本回退</a>
<ul>
<li><a href="#提交日志">8.1 提交日志</a></li>
<li><a href="#查看命令历史-记录每次命令">8.2 查看命令历史, 记录每次命令</a></li>
<li><a href="#版本回退-1">8.3 版本回退</a></li>
</ul></li>
<li><a href="#撤销修改">9.撤销修改</a>
<ul>
<li><a href="#丢弃工作区的修改">9.1 丢弃工作区的修改,</a></li>
<li><a href="#把暂存区的修改回退到工作区丢弃暂存区的修改">9.2 把暂存区的修改回退到工作区(丢弃暂存区的修改)</a></li>
</ul></li>
<li><a href="#分支管理">10.分支管理</a>
<ul>
<li><a href="#创建与合并分支">10.1 创建与合并分支</a></li>
</ul></li>
</ul></li>
<li><a href="#git-pull-request">Git Pull Request</a>
<ul>
<li><a href="#fork">1.Fork</a></li>
<li><a href="#clone">2.Clone</a></li>
<li><a href="#branch">3.Branch</a>
<ul>
<li><a href="#确认分支">3.1 确认分支</a></li>
<li><a href="#创建特性feature分支">3.2 创建特性(feature)分支</a></li>
</ul></li>
<li><a href="#change">4.Change</a>
<ul>
<li><a href="#修改项目代码">4.1 修改项目代码</a></li>
<li><a href="#提交修改">4.2 提交修改</a></li>
<li><a href="#创建远程分支">4.3 创建远程分支</a></li>
</ul></li>
<li><a href="#pull-request">5.Pull Request</a></li>
</ul></li>
<li><a href="#git-.gitignore-相关">Git .gitignore 相关</a>
<ul>
<li><a href="#设置-.gitignore">1.设置 .gitignore</a></li>
<li><a href="#更新-.gitignore">2.更新 .gitignore</a></li>
</ul></li>
</ul>
</div>

<style>
h1 {
  background-color: #2B90B6;
  background-image: linear-gradient(45deg, #4EC5D4 10%, #146b8c 20%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
h2 {
  background-color: #2B90B6;
  background-image: linear-gradient(45deg, #4EC5D4 10%, #146b8c 20%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>
<div id="git-flow" class="section level1">
<h1>Git flow</h1>
<p>GitHub flow 是一个轻量级的、基于分支(branch)的工作流, 它支持定期进行部署的团队和项目.</p>
<div id="创建一个分支create-a-branch" class="section level2">
<h2>1.创建一个分支(create a branch)</h2>
<div class="figure">
<img src="images/git1.png" alt="" />
<p class="caption">git</p>
</div>
<ul>
<li><p>When you’re working on a project, you’re going to have a bunch of
different features or ideas in progress at any given time – some of
which are ready to go, and others which are not. Branching exists to
help you manage this workflow.</p></li>
<li><p>When you create a branch in your project, you’re creating an
environment where you can try out new ideas. Changes you make on a
branch don’t affect the <code>master</code> branch, so you’re free to
experiment and commit changes, safe in the knowledge that your branch
won’t be merged until it’s ready to be reviewed by someone you’re
collaborating with.</p></li>
<li><p><strong>ProTip</strong></p>
<ul>
<li>Branching is a core concept in Git, and the entire GitHub flow is
based upon it. There’s only one rule: anything in the <code>master</code>
branch is always deployable. Because of this, it’s extremely
important that your new branch is created off of master when
working on a feature or a fix. Your branch name should be
descriptive (e.g., <code>refactor-authentication</code>,
<code>user-content-cache-key</code>, <code>make-retina-avatars</code>), so that
others can see what is being worked on.</li>
</ul></li>
</ul>
</div>
<div id="添加提交add-commit" class="section level2">
<h2>2.添加提交(Add commit)</h2>
<div class="figure">
<img src="images/git2.png" alt="" />
<p class="caption">git</p>
</div>
<ul>
<li><p>Once your branch has been created, it’s time to start making changes.
Whenever you add, edit, or delete a file, you’re making a commit, and
adding them to your branch. This process of adding commits keeps
track of your progress as you work on a feature branch.</p></li>
<li><p>Commits also create a transparent history of your work that others
can follow to understand what you’ve done and why. Each commit has an
associated commit message, which is a description explaining why a
particular change was made. Furthermore, each commit is considered a
separate unit of change. This lets you roll back changes if a bug is
found, or if you decide to head in a different direction.</p></li>
<li><p><strong>ProTip</strong></p>
<ul>
<li>Commit messages are important, especially since Git tracks your
changes and then displays them as commits once they’re pushed to
the server. By writing clear commit messages, you can make it
easier for other people to follow along and provide feedback.</li>
</ul></li>
</ul>
</div>
<div id="开一个拉取请求open-a-pull-request" class="section level2">
<h2>3.开一个拉取请求(Open a Pull Request)</h2>
<div class="figure">
<img src="images/git3.png" alt="" />
<p class="caption">git</p>
</div>
<ul>
<li><p>Pull Requests initiate discussion about your commits. Because they’re
tightly integrated with the underlying Git repository, anyone can see
exactly what changes would be merged if they accept your request.</p></li>
<li><p>You can open a Pull Request at any point during the development
process: when you have little or no code but want to share some
screenshots or general ideas, when you’re stuck and need help or
advice, or when you’re ready for someone to review your work. By
using GitHub’s <span class="citation">@mention</span> system in your Pull Request message, you can
ask for feedback from specific people or teams, whether they’re down
the hall or ten time zones away.</p></li>
<li><p><strong>ProTip</strong></p>
<ul>
<li>Pull Requests are useful for contributing to open source projects
and for managing changes to shared repositories. If you’re using a
Fork &amp; Pull Model, Pull Requests provide a way to notify project
maintainers about the changes you’d like them to consider. If
you’re using a Shared Repository Model, Pull Requests help start
code review and conversation about proposed changes before they’re
merged into the master branch.</li>
</ul></li>
</ul>
</div>
<div id="讨论和审核代码discuss-and-review-your-code" class="section level2">
<h2>4.讨论和审核代码(Discuss and review your code)</h2>
<div class="figure">
<img src="images/git4.png" alt="" />
<p class="caption">git</p>
</div>
<ul>
<li><p>Once a Pull Request has been opened, the person or team reviewing
your changes may have questions or comments. Perhaps the coding style
doesn’t match project guidelines, the change is missing unit tests,
or maybe everything looks great and props are in order. Pull Requests
are designed to encourage and capture this type of conversation.</p></li>
<li><p>You can also continue to push to your branch in light of discussion
and feedback about your commits. If someone comments that you forgot
to do something or if there is a bug in the code, you can fix it in
your branch and push up the change. GitHub will show your new commits
and any additional feedback you may receive in the unified Pull
Request view.</p></li>
<li><p><strong>ProTip</strong></p>
<ul>
<li>Pull Request comments are written in Markdown, so you can embed
images and emoji, use pre-formatted text blocks, and other
lightweight formatting.</li>
</ul></li>
</ul>
</div>
<div id="部署-deploy" class="section level2">
<h2>5.部署 (Deploy)</h2>
<div class="figure">
<img src="images/git5.png" alt="" />
<p class="caption">git</p>
</div>
<ul>
<li>With GitHub, you can deploy from a branch for final testing in
production before merging to master.</li>
<li>Once your pull request has been reviewed and the branch passes your
tests, you can deploy your changes to verify them in production. If
your branch causes issues, you can roll it back by deploying the
existing master into production.</li>
</ul>
</div>
<div id="合并merge" class="section level2">
<h2>6.合并(Merge)</h2>
<div class="figure">
<img src="images/git6.png" alt="" />
<p class="caption">git</p>
</div>
<ul>
<li><p>Now that your changes have been verified in production, it is time to
merge your code into the master branch.</p></li>
<li><p>Once merged, Pull Requests preserve a record of the historical
changes to your code. Because they’re searchable, they let anyone go
back in time to understand why and how a decision was made.</p></li>
<li><p><strong>ProTip</strong></p>
<ul>
<li>By incorporating certain keywords into the text of your Pull
Request, you can associate issues with code. When your Pull
Request is merged, the related issues are also closed. For
example, entering the phrase <code>Closes #32</code> would close issue
number 32 in the repository. For more information, check out our
<code>help   article &lt;https://help.github.com/articles/closing-issues-via-commit-messages&gt;</code>__.</li>
</ul></li>
</ul>
</div>
</div>
<div id="git-repository-管理" class="section level1">
<h1>Git Repository 管理</h1>
<div id="git-下载-repo.zip-并关联到-github-remote" class="section level2">
<h2>1.Git 下载 repo.zip 并关联到 GitHub remote</h2>
<ol style="list-style-type: decimal">
<li>下载 repo.zip</li>
<li>解压 repo.zip</li>
<li>进入解压后的 repo</li>
</ol>
<pre class="bash"><code>cd repo</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>将 <code>repo</code> 关联到 GitHub remote</li>
</ol>
<pre class="bash"><code>git init
git remote add origin &lt;remote repository URL&gt;
git remote -v
git pull origin master</code></pre>
</div>
<div id="git-httphttps-ssh" class="section level2">
<h2>2.Git http/https ⇒ SSH</h2>
<ol style="list-style-type: decimal">
<li>查看现在的仓库远程地址配置:</li>
</ol>
<pre class="bash"><code>git remote -v</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>删除现在的远程地址配置:</li>
</ol>
<pre class="bash"><code>git remote rm origin</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>添加新的远程地址配置:</li>
</ol>
<pre class="bash"><code>git remote add origin git@github.com:example.git
git remote set-url origin git@github.com:example.git</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>现在可以使用SSH方式进行验证:</li>
</ol>
<pre class="bash"><code>git pull
...
# 第一次 git push 时需要执行以下操作
git push
git push --set-upstream origin master</code></pre>
</div>
</div>
<div id="cloning-with-ssh-urls" class="section level1">
<h1>Cloning with SSH URLs</h1>
<div id="introductio" class="section level2">
<h2>1.Introductio</h2>
<ul>
<li>SSH URLs provides access to a Git repository via SSH, a secure
protocol.</li>
<li>To use these URLs, you must generate an <code>SSH keypair</code> on your
computer and add the <code>public key</code> to your Github account.</li>
<li>When you <code>git clone</code>, <code>git fetch</code>, <code>git pull</code>, <code>git push</code> to
a remote repository using SSH URLs, you’ll be prompted for a password
and must provide your SSH key passphrase.</li>
<li>If you are accessing an organization that uses SAML single sign-on
(SSO), you must authorize your SSH key to access the organization
before you authenticate.</li>
<li>You can use an SSH URL to clone a repository to your computer, or as
a secure way of deploying your code to production servers. You can
also use SSH agent forwarding with your deploy script to avoid
managing keys on the server.</li>
</ul>
</div>
<div id="connecting-to-github-with-ssh" class="section level2">
<h2>2.Connecting to GitHub with SSH</h2>
<div id="关于-ssh" class="section level3">
<h3>2.1 关于 SSH</h3>
</div>
<div id="检查本地是否已有-ssh-keys" class="section level3">
<h3>2.2 检查本地是否已有 SSH keys</h3>
<p>在生成一个新的 SSH key 之前, 可以先检查一下本地是否已经有 SSH key.</p>
<pre class="bash"><code>$ ls -al /.ssh</code></pre>
</div>
<div id="生成一个新的-ssh-key-并把生成的-ssh-key-加入-ssh-agent" class="section level3">
<h3>2.3 生成一个新的 SSH key 并把生成的 SSH key 加入 ssh-agent</h3>
<ol style="list-style-type: decimal">
<li>生成一个新的 SSH key</li>
</ol>
<pre class="bash"><code>$ ssh-keygen -t rsa -b 4096 -C &quot;your_email@example.com&quot;</code></pre>
<ol start="2" style="list-style-type: decimal">
<li><p>把生成的 SSH key 加入 ssh-agent</p>
<ul>
<li>(1)Start the ssh-agent in the background</li>
</ul></li>
</ol>
<pre class="bash"><code>$ eval &quot;$(ssh-agent -s)&quot;</code></pre>
<pre><code>- (2)[mac] modify your `/.ssh/config` file to automatically load keys
  into the ssh-agent and store passphrases in your keychain.</code></pre>
<pre class="bash"><code>$ open /.ssh/config
$ touch /.ssh/config
$ vim /.ssh/config

Host alia_name
AddKeysTzoAgent yes
UseKeychain yes
IdentityFile /.ssh/id_rsa</code></pre>
<pre><code>- (3)Add your SSH private key to the ssh-agent and store your passphrase in the keychain</code></pre>
<pre class="bash"><code># mac
$ ssh-add -K /.ssh/id_rsa

# Linux
$ ssh-add /.ssh/id_rsa</code></pre>
</div>
<div id="将-ssh-key-加入-github-账号" class="section level3">
<h3>2.4 将 SSH key 加入 GitHub 账号</h3>
<p>配置 GitHub 账号可以使用本地的 SSH key</p>
<ol style="list-style-type: decimal">
<li>复制本地的 SSH key 公钥到剪切板上(clipboard)</li>
</ol>
<pre class="bash"><code>pbcopy &lt; /.ssh/id_rsa.pub</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>GitHub account</li>
<li>Settings</li>
<li>SSH and GPG keys</li>
<li>SSH keys</li>
<li>New SSH key</li>
<li>Title &amp; Key</li>
<li>Add SSH key</li>
</ol>
</div>
<div id="测试-ssh-连接" class="section level3">
<h3>2.5 测试 SSH 连接</h3>
</div>
<div id="使用-ssh-passphrases-工作" class="section level3">
<h3>2.6 使用 SSH passphrases 工作</h3>
</div>
</div>
</div>
<div id="git-基础知识" class="section level1">
<h1>Git 基础知识</h1>
<div id="安装-gitmac" class="section level2">
<h2>1.安装 Git(Mac)</h2>
<pre class="bash"><code>$ sudo apt-get install git
$ git --version</code></pre>
</div>
<div id="创建-ssh-key" class="section level2">
<h2>2.创建 SSH Key</h2>
<pre class="bash"><code>$ ssh-keygen -t rsa -p 4096 -C &quot;your@email.com&quot;</code></pre>
</div>
<div id="git-配置" class="section level2">
<h2>3.Git 配置</h2>
<div id="配置-git" class="section level3">
<h3>3.1 配置 Git</h3>
<pre class="bash"><code>$ git config --global user.name &quot;wangzhefeng&quot;
$ git config --global user.email &quot;wangzhefengr@163.com&quot;
$ git config --global core.editor gedit</code></pre>
</div>
<div id="git-配置文件" class="section level3">
<h3>3.2 Git 配置文件</h3>
<pre class="bash"><code># 包含系统上每一个用户及它们仓库的通用配置
$ sudo gedit /etc/gitconfig

# 只针对当前用户
$ sudo gedit /.gitconfig</code></pre>
<p>or:</p>
<pre class="bash"><code>$ sudo gedit /.config/git/config

# 针对该仓库
$ sudo gedit .git/config</code></pre>
</div>
<div id="检查-git-配置信息" class="section level3">
<h3>3.3 检查 Git 配置信息</h3>
<pre class="bash"><code>$ git config --list
$ git config user.name
$ git config user.email
$ git config core.editor</code></pre>
</div>
</div>
<div id="获取帮助" class="section level2">
<h2>4.获取帮助</h2>
<pre class="bash"><code>$ git help &lt;verb&gt;
$ git &lt;verb&gt; help
$ man git-&lt;verb&gt;

$ git help config</code></pre>
</div>
<div id="git-工作流程" class="section level2">
<h2>5.Git 工作流程</h2>
<div id="创建-git仓库2种" class="section level3">
<h3>5.1 创建 Git仓库(2种)</h3>
<ol style="list-style-type: decimal">
<li><p>在现有项目或目录下导入所有的文件到Git中；</p>
<ul>
<li><p>建立本地仓库目录(项目目录)</p></li>
<li><p>初始化版本库</p>
<ul>
<li><p>创建版本库(repository) =&gt; .git</p>
<ul>
<li>暂存区 =&gt; stage(index)</li>
<li>唯一一个分支 =&gt; master</li>
<li>指向master的一个指针 =&gt; HEAD</li>
</ul></li>
</ul></li>
</ul></li>
<li><p>新建远程库 =&gt; 从一个服务器克隆一个现有的Git仓库</p></li>
</ol>
<ul>
<li>方法一:</li>
</ul>
<pre class="bash"><code>$ mkdir git_test
$ git init</code></pre>
<ul>
<li>方法二:</li>
</ul>
<pre class="bash"><code>$ git clone https://github.com/wangzhefeng/git_test.git
$ git clone https://github.com/wangzhefeng/git_test.git git_test</code></pre>
</div>
<div id="添加版本库中的文件到暂存区" class="section level3">
<h3>5.2 添加版本库中的文件到暂存区</h3>
<pre class="bash"><code>$ git .
# or
$ git add .
# or
$ git add file_name
# or
$ git add path_name\file_name
# or
$ git add path_name\*.txt</code></pre>
</div>
<div id="把暂存区的所有内容提交到当前分支" class="section level3">
<h3>5.3 把暂存区的所有内容提交到当前分支</h3>
<pre class="bash"><code>$ git commit -m &#39;initial project version&#39;</code></pre>
</div>
<div id="把一个已有的本地仓库和远程git库关联" class="section level3">
<h3>5.4 把一个已有的本地仓库和远程git库关联</h3>
<pre class="bash"><code>$ git remote add origin https://github.com/wangzhefeng/resp.git</code></pre>
</div>
<div id="把本地库的内容推送到远程把当前分支推送到远程" class="section level3">
<h3>5.5 把本地库的内容推送到远程(把当前分支推送到远程)</h3>
<pre class="bash"><code>$ git push -u origin master</code></pre>
</div>
<div id="从远程分支拉取最新的版本到本地并合并" class="section level3">
<h3>5.6 从远程分支拉取最新的版本到本地并合并</h3>
<ol style="list-style-type: decimal">
<li><p>git fetch</p>
<ul>
<li>从远程获取最新版本到本地, 不会自动merge</li>
</ul></li>
<li><p>git pull</p>
<ul>
<li>从远程获取最新版本到本地, 自动merge</li>
<li>方法一:</li>
</ul></li>
</ol>
<pre class="bash"><code># 从远程的origin的master主分支下载最新的版本到origin/master分支上
$ git fetch origin master

# 比较本地的master分支和origin/master分支的差别
$ git log -p master..origin/master

# 合并
$ git merge origin/master</code></pre>
<p>or</p>
<pre class="bash"><code>$ git fetch origin master:tmp
$ git diff tmp
$ git merge tmp</code></pre>
<pre><code>- 方法二: </code></pre>
<pre class="bash"><code>$ git pull origin master</code></pre>
</div>
</div>
<div id="查看当前信息" class="section level2">
<h2>6.查看当前信息</h2>
<div id="查看当前文件状态" class="section level3">
<h3>6.1 查看当前文件状态</h3>
<pre class="bash"><code>$ git status
$ git status -s
$ git status --short</code></pre>
</div>
<div id="查看已暂存和未暂存的修改" class="section level3">
<h3>6.2 查看已暂存和未暂存的修改</h3>
<pre class="bash"><code>$ git diff 
$ git diff --cached
$ git diff --staged</code></pre>
</div>
<div id="查看工作区和版本库里最新版本的区别" class="section level3">
<h3>6.3 查看工作区和版本库里最新版本的区别</h3>
<pre class="bash"><code>$ git diff HEAD --file.txt</code></pre>
</div>
</div>
<div id="移除文件从暂存区域移除" class="section level2">
<h2>7.移除文件(从暂存区域移除)</h2>
<div id="确定要从版本库中删除文件" class="section level3">
<h3>7.1 确定要从版本库中删除文件</h3>
<pre class="bash"><code>$ git rm
$ git commit -m &quot;message&quot;</code></pre>
<p>or</p>
<pre class="bash"><code>$ git add .</code></pre>
</div>
<div id="误删工作区文件-将版本库中的文件替换工作取得文件" class="section level3">
<h3>7.2 误删工作区文件, 将版本库中的文件替换工作取得文件</h3>
<pre class="bash"><code>$ git checkout -- test.txt</code></pre>
</div>
</div>
<div id="版本回退" class="section level2">
<h2>8.版本回退</h2>
<div id="提交日志" class="section level3">
<h3>8.1 提交日志</h3>
<pre class="bash"><code>$ git log --pretty=oneline</code></pre>
</div>
<div id="查看命令历史-记录每次命令" class="section level3">
<h3>8.2 查看命令历史, 记录每次命令</h3>
<pre class="bash"><code>$ git reflog</code></pre>
</div>
<div id="版本回退-1" class="section level3">
<h3>8.3 版本回退</h3>
<div id="回退到上一个版本head-当前版本" class="section level4">
<h4>8.3.1 回退到上一个版本(HEAD: 当前版本)</h4>
<pre class="bash"><code>$ git log
$ git reset --hard HEAD^
$ git reset --hard HEAD10
$ git reset --hard commit_id</code></pre>
</div>
<div id="前进到某个版本" class="section level4">
<h4>8.3.2 前进到某个版本</h4>
<pre class="bash"><code>$ git reflog
$ git reset --hard commit_id</code></pre>
</div>
</div>
</div>
<div id="撤销修改" class="section level2">
<h2>9.撤销修改</h2>
<div id="丢弃工作区的修改" class="section level3">
<h3>9.1 丢弃工作区的修改,</h3>
<ul>
<li>自修改后还未被放到暂存区(还未进行git add) =&gt; 回到和版本库一样的状态</li>
<li>添加到暂存区后又作了修改(进行了git add) =&gt; 添加到暂存区后的状态</li>
</ul>
<pre class="bash"><code>$ git checkout -- file.txt</code></pre>
</div>
<div id="把暂存区的修改回退到工作区丢弃暂存区的修改" class="section level3">
<h3>9.2 把暂存区的修改回退到工作区(丢弃暂存区的修改)</h3>
<pre class="bash"><code>$ git reset HEAD file.txt
$ git checkout --file.txt</code></pre>
</div>
</div>
<div id="分支管理" class="section level2">
<h2>10.分支管理</h2>
<div id="创建与合并分支" class="section level3">
<h3>10.1 创建与合并分支</h3>
<div id="创建tinker分支-然后切换到tinker分支" class="section level4">
<h4>10.1.1 创建tinker分支, 然后切换到tinker分支</h4>
<pre class="bash"><code>$ git checkout -b tinker</code></pre>
<pre class="bash"><code>$ git branch tinker
$ git checkout tinker</code></pre>
</div>
<div id="查看当前分支" class="section level4">
<h4>10.1.2 查看当前分支</h4>
<pre class="bash"><code>$ git branch</code></pre>
</div>
<div id="切换回master分支" class="section level4">
<h4>10.1.3 切换回master分支</h4>
<pre class="bash"><code>git checkout master</code></pre>
</div>
<div id="将tinker分支的工作成果合并到master分支上" class="section level4">
<h4>10.1.4 将tinker分支的工作成果合并到master分支上</h4>
<pre class="bash"><code>$ git checkout master
$ git merge tinker</code></pre>
</div>
<div id="删除tinker分支" class="section level4">
<h4>10.1.5 删除tinker分支</h4>
<pre class="bash"><code>$ git branch -d tinker</code></pre>
</div>
</div>
</div>
</div>
<div id="git-pull-request" class="section level1">
<h1>Git Pull Request</h1>
<p>pull request 是社会化编程的象征, 通过这个功能, 你可以参与到别人开发的项目中, 并作出自己的贡献.
pull request 是自己修改源代码后, 请求对方仓库采纳的一种行为.</p>
<div id="fork" class="section level2">
<h2>1.Fork</h2>
<p>找到想要 <code>pull request</code> 的项目 <code>test</code> , 然后点击 <code>fork</code>
按钮, 此时自己的仓库中就会有一个别人的项目仓库, 名字为: <code>you_github_name/test</code> .</p>
</div>
<div id="clone" class="section level2">
<h2>2.Clone</h2>
<p>在把想要 <code>pull request</code> 的项目克隆到本地环境:</p>
<pre class="bash"><code>git clone https://github.com/wangzhefeng/test.git</code></pre>
</div>
<div id="branch" class="section level2">
<h2>3.Branch</h2>
<div id="确认分支" class="section level3">
<h3>3.1 确认分支</h3>
<p>通过在终端运行命令查看当前项目所在的分支, 通常都是在查看分支后再进行代码的修改, 这是个好习惯.</p>
<pre class="bash"><code>git branch -a</code></pre>
</div>
<div id="创建特性feature分支" class="section level3">
<h3>3.2 创建特性(feature)分支</h3>
<p>在应用 GitHub 修改代码时, 常常采用的策略是在主分支(<code>master</code>)下再创建一个特性分支(<code>feature_a</code>),
在该特性分支下进行代码的修改, 然后通过该分支执行 <code>pull request</code> 操作.
通过命令: <code>git checkout -b feature_a master</code> (其中 <code>feature_a</code> 为新建的特性分支, <code>master</code>
为当前所在的分支)创建新的特性分支并自动切换.</p>
<pre class="bash"><code>git checkout -b feature_a master</code></pre>
</div>
</div>
<div id="change" class="section level2">
<h2>4.Change</h2>
<div id="修改项目代码" class="section level3">
<h3>4.1 修改项目代码</h3>
<p>在创建的 <code>feature_a</code> 分支下对 <code>fork</code> 的项目内容进行修改.</p>
</div>
<div id="提交修改" class="section level3">
<h3>4.2 提交修改</h3>
<pre class="bash"><code># 查看修改的内容是否正确
git diff

# 增加修改内容说明文档
git add README.md

# 提交修改
git commit -m &quot;add README.md&quot;</code></pre>
</div>
<div id="创建远程分支" class="section level3">
<h3>4.3 创建远程分支</h3>
<p>要从 GitHub 发送 <code>pull request</code> , GitHub
端的仓库中必须有一个包含了修改后的代码的分支,
所以需要创建一个与刚刚创建的特性分支（修改所在的分支）相对应的远程分支,
执行命令:</p>
<pre class="bash"><code>git push origin work1</code></pre>
<p>其中: <code>origin</code> 为当时 <code>fork</code> 的远程主分支的名称,
一般默认为 <code>origin</code>, <code>feature_a</code> 为本地工作的特性分支.</p>
<p>然后进行查看是否创建成功:</p>
<pre class="bash"><code>$ git branch -a</code></pre>
</div>
</div>
<div id="pull-request" class="section level2">
<h2>5.Pull Request</h2>
<p>进入到自己的 GitHub 账户下, 并切换到创建的特性分支(<code>feature_a</code>)下,
点击 <code>create pull request</code> , 确定没问题, 并填写相关修改内容,
点击 <code>send pull request</code>.</p>
</div>
</div>
<div id="git-.gitignore-相关" class="section level1">
<h1>Git .gitignore 相关</h1>
<div id="设置-.gitignore" class="section level2">
<h2>1.设置 .gitignore</h2>
</div>
<div id="更新-.gitignore" class="section level2">
<h2>2.更新 .gitignore</h2>
<p>Git 更新 ignore 文件直接修改 <code>.gitignore</code> 是不不会生效的, 需要先去掉已经托管的文件,
修改完成之后再重新添加并提交.</p>
<p>1.删除已经托管的文件</p>
<pre class="bash"><code>$ git rm -r --cached path_to_file</code></pre>
<ol style="list-style-type: decimal">
<li>修改 <code>.gitignore</code> 文件的内容</li>
<li>提交修改</li>
</ol>
<pre class="bash"><code>$ git add .
$ git commit -m &quot;clear cached&quot;
$ git push</code></pre>
</div>
</div>
