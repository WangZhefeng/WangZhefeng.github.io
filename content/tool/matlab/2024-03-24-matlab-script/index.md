---
title: MATLAB 编程
author: 王哲峰
date: '2024-03-24'
slug: matlab-script
categories:
  - MATLAB
tags:
  - tool
---


# Matlab 程序设计

## M 文件

用 MATLAB 语言编写的程序，称为 M 文件。M 文件有两类：

* 命令文件：没有输入参数，也不返回输出参数
* 函数文件：可以输入参数，也可返回输出参数
    - `input` 函数：用于向计算机输入一个参数
    - `pause` 函数：暂停程序的执行
    - `disp` 函数：命令窗口输出函数

## 程序设计

### for 语句

语法：

```matlab
for 循环变量 = 表达式1:表达式2:表达式3
    循环体语句
end
```

其中：

* `表达式1` 的值为循环变量的初值
* `表达式2` 的值为步长。步长为 1 时，`表达式2` 可以省略
* `表达式3` 的值为循环变量的终值

### while 语句

```matlab
while (条件)
    循环体语句
end
```

## 函数文件

### 函数创建

函数文件是另一种形式的 M 文件，每一个函数文件都定义一个函数。
函数文件由 `function` 语句引导，其格式为：

```matlab
function 输出形参标=函数名(输入形参表)
    注释说明部分
    函数体
```

其中：

* `函数名` 的命名规则与变量名相同
* `输入形参` 为函数的输入参数
* `输出形参` 为函数的输出参数。当`输出形参`多于 1 个时，则应该用方括号括起来

示例：

```matlab
function f = ffib(n)
    % 用于求 Fibonacci 数列的函数文件
    f = [1, 1];
    i = 1;
    while f(i) + f(i + 1) < n
        f(i + 2) = f(i) + f(i + 1);
        i = i + 1;
    end
```

### 函数调用

```matlab
[输出实参表]=函数名(输入实参表)
```

## 全局变量和局部变量

在 MATLAB 中，全局变量用命令 `global` 定义。

* 函数文件的内部变量是局部的，与其他函数文件及 MATLAB 工作空间相互隔离
* 如果在多个函数中，都把某一变量定义为全局变量，那么这些函数将公用这一个变量
* 全局变量的作用域是整个 MATLAB 工作空间，即全程有效。

