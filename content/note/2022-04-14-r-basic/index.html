---
title: r
author: 王哲峰
date: '2022-04-14'
slug: r-basic
categories: 
  - r
tags:
  - tool
output:
  blogdown::html_page:
    toc: true
    fig_width: 6
    dev: "svg"
---

<script src="{{< blogdown/postref >}}index_files/header-attrs/header-attrs.js"></script>

<div id="TOC">
<ul>
<li><a href="#r-运行">R 运行</a>
<ul>
<li><a href="#交互模式">交互模式</a></li>
<li><a href="#批处理模式">批处理模式</a></li>
</ul></li>
<li><a href="#r-基本类型">R 基本类型</a>
<ul>
<li><a href="#标量">标量</a></li>
<li><a href="#向量">向量</a>
<ul>
<li><a href="#创建向量">创建向量</a></li>
<li><a href="#向量索引">向量索引</a></li>
<li><a href="#向量计算">向量计算</a></li>
</ul></li>
<li><a href="#字符串">字符串</a>
<ul>
<li><a href="#字符串操作函数">字符串操作函数</a></li>
</ul></li>
<li><a href="#矩阵">矩阵</a></li>
<li><a href="#列表">列表</a>
<ul>
<li><a href="#数据框">数据框</a></li>
</ul></li>
<li><a href="#布尔类型">布尔类型</a></li>
<li><a href="#类型总结">类型总结</a></li>
</ul></li>
<li><a href="#r-基本操作">R 基本操作</a>
<ul>
<li><a href="#退出r">退出R</a></li>
<li><a href="#运算符">运算符</a></li>
<li><a href="#索引">索引</a></li>
</ul></li>
<li><a href="#r-函数">R 函数</a></li>
<li><a href="#r-内置数据集">R 内置数据集</a></li>
<li><a href="#r-面向对象编程">R 面向对象编程</a></li>
<li><a href="#方法函数总结">方法、函数总结</a></li>
</ul>
</div>

<div id="r-运行" class="section level1">
<h1>R 运行</h1>
<div id="交互模式" class="section level2">
<h2>交互模式</h2>
<pre class="r"><code>source(&quot;file.R&quot;)</code></pre>
<pre class="r"><code># file.R 中的代码
pdf(&quot;xh.pdf&quot;)
hist(rnorm(100))
dev.off()</code></pre>
</div>
<div id="批处理模式" class="section level2">
<h2>批处理模式</h2>
<pre class="bash"><code>$ R CMD BATCH z.R</code></pre>
</div>
</div>
<div id="r-基本类型" class="section level1">
<h1>R 基本类型</h1>
<div id="标量" class="section level2">
<h2>标量</h2>
<ul>
<li>标量，或单个的数，其实在 R 中并不存在，单个数实际上是一元向量</li>
</ul>
<pre class="r"><code>x &lt;- 8
x</code></pre>
<pre><code>## [1] 8</code></pre>
</div>
<div id="向量" class="section level2">
<h2>向量</h2>
<ul>
<li>向量类型是 R 语言的核心。向量的元素必须属于某种“模式”(mode)
<ul>
<li><code>mode()</code></li>
</ul></li>
<li>向量支持的操作
<ul>
<li>数字索引</li>
<li>名字索引(可用 <code>names()</code>)</li>
</ul></li>
</ul>
<div id="创建向量" class="section level3">
<h3>创建向量</h3>
<ul>
<li><code>c</code>: concatenate 连接</li>
</ul>
<pre class="r"><code>x &lt;- c(1, 2, 3, 4)
x</code></pre>
<pre><code>## [1] 1 2 3 4</code></pre>
</div>
<div id="向量索引" class="section level3">
<h3>向量索引</h3>
<pre class="r"><code>x[1]</code></pre>
<pre><code>## [1] 1</code></pre>
<pre class="r"><code>x[2:3]</code></pre>
<pre><code>## [1] 2 3</code></pre>
</div>
<div id="向量计算" class="section level3">
<h3>向量计算</h3>
<pre class="r"><code>mean(x)</code></pre>
<pre><code>## [1] 2.5</code></pre>
<pre class="r"><code>sd(x)</code></pre>
<pre><code>## [1] 1.290994</code></pre>
</div>
</div>
<div id="字符串" class="section level2">
<h2>字符串</h2>
<ul>
<li>字符串实际上是字符模式的单元素向量</li>
<li>字符串支持的操作
<ul>
<li>数字索引</li>
<li>字符串操作函数</li>
</ul></li>
</ul>
<pre class="r"><code>x &lt;- c(5, 12, 13)
print(x)</code></pre>
<pre><code>## [1]  5 12 13</code></pre>
<pre class="r"><code>length(x)</code></pre>
<pre><code>## [1] 3</code></pre>
<pre class="r"><code>mode(x)</code></pre>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<pre class="r"><code>y &lt;- &quot;abc&quot;
print(y)</code></pre>
<pre><code>## [1] &quot;abc&quot;</code></pre>
<pre class="r"><code>length(y)</code></pre>
<pre><code>## [1] 1</code></pre>
<pre class="r"><code>mode(y)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<pre class="r"><code>z &lt;- c(&quot;abc&quot;, &quot;29 88&quot;)
length(z)</code></pre>
<pre><code>## [1] 2</code></pre>
<pre class="r"><code>mode(z)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div id="字符串操作函数" class="section level3">
<h3>字符串操作函数</h3>
<ul>
<li><code>paste()</code></li>
<li><code>strsplit()</code></li>
</ul>
<pre class="r"><code>u &lt;- paste(&quot;abc&quot;, &quot;de&quot;, &quot;f&quot;)
u</code></pre>
<pre><code>## [1] &quot;abc de f&quot;</code></pre>
<pre class="r"><code>v &lt;- strsplit(u, &quot; &quot;)
v</code></pre>
<pre><code>## [[1]]
## [1] &quot;abc&quot; &quot;de&quot;  &quot;f&quot;</code></pre>
</div>
</div>
<div id="矩阵" class="section level2">
<h2>矩阵</h2>
</div>
<div id="列表" class="section level2">
<h2>列表</h2>
<div id="数据框" class="section level3">
<h3>数据框</h3>
</div>
</div>
<div id="布尔类型" class="section level2">
<h2>布尔类型</h2>
<ul>
<li><code>TRUE</code> or <code>T</code></li>
<li><code>FALSE</code> or <code>F</code></li>
</ul>
</div>
<div id="类型总结" class="section level2">
<h2>类型总结</h2>
<table>
<caption>R 类型</caption>
<colgroup>
<col width="11%" />
<col width="14%" />
<col width="11%" />
<col width="15%" />
<col width="11%" />
<col width="21%" />
<col width="14%" />
</colgroup>
<thead>
<tr class="header">
<th>类型</th>
<th>包含内容</th>
<th>可变性</th>
<th>序列操作</th>
<th>可嵌套</th>
<th>增长/缩短</th>
<th>方法调用</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>数字</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>string</td>
<td></td>
<td>不可变</td>
<td>序列-有序</td>
<td></td>
<td>不可增长/缩短</td>
<td>可</td>
</tr>
<tr class="odd">
<td>list</td>
<td>集合</td>
<td>可变</td>
<td>序列-有序</td>
<td>可嵌套</td>
<td></td>
<td>可</td>
</tr>
<tr class="even">
<td>dict</td>
<td>集合</td>
<td>可变</td>
<td>映射-无序</td>
<td>可嵌套</td>
<td>可增长/缩短</td>
<td></td>
</tr>
<tr class="odd">
<td>tuple</td>
<td>集合</td>
<td>可变</td>
<td>序列-有序</td>
<td>可嵌套</td>
<td>可增长/缩短</td>
<td></td>
</tr>
<tr class="even">
<td>file</td>
<td>集合</td>
<td>可变</td>
<td></td>
<td></td>
<td>不可增长/缩短</td>
<td>不可</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="r-基本操作" class="section level1">
<h1>R 基本操作</h1>
<div id="退出r" class="section level2">
<h2>退出R</h2>
<ul>
<li>Windows
<ul>
<li><code>q()</code></li>
</ul></li>
<li>Linux
<ul>
<li><code>Ctrl-D</code></li>
</ul></li>
<li>Mac
<ul>
<li><code>Command-D</code></li>
</ul></li>
</ul>
</div>
<div id="运算符" class="section level2">
<h2>运算符</h2>
<ul>
<li>求模(求余数)
<ul>
<li><code>%%</code></li>
</ul></li>
<li>超赋值运算符(superassignment operator)
<ul>
<li><code>&lt;&lt;-</code></li>
<li>在函数内部给全局变量赋值</li>
</ul></li>
</ul>
</div>
<div id="索引" class="section level2">
<h2>索引</h2>
<ul>
<li>向量索引：从 1 开始</li>
</ul>
</div>
</div>
<div id="r-函数" class="section level1">
<h1>R 函数</h1>
<ul>
<li>R 语言编程的戒律之一就是尽可能避免使用循环，如果不能避免，就要让循环更简洁</li>
<li>在没有显式调用 <code>return</code> 时，R 语言的函数会返回最后计算的值，不过，这个方法必须慎重使用</li>
</ul>
<pre class="r"><code>oodcount &lt;- function(x) {
    k &lt;- 0 # assign 0 to k
    for (n in x) {
        if (n %% 2 == 1) {
            k &lt;- k + 1
        }
    }
    return(k)
}

oodcount(c(1, 3, 5))</code></pre>
<pre><code>## [1] 3</code></pre>
<pre class="r"><code>oodcount(c(1, 2, 3, 7, 9))</code></pre>
<pre><code>## [1] 4</code></pre>
</div>
<div id="r-内置数据集" class="section level1">
<h1>R 内置数据集</h1>
<pre class="r"><code>data()</code></pre>
<pre class="r"><code>mean(Nile)</code></pre>
<pre><code>## [1] 919.35</code></pre>
<pre class="r"><code>sd(Nile)</code></pre>
<pre><code>## [1] 169.2275</code></pre>
<pre class="r"><code>hist(Nile)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-11-1.svg" width="576" /></p>
</div>
<div id="r-面向对象编程" class="section level1">
<h1>R 面向对象编程</h1>
</div>
<div id="方法函数总结" class="section level1">
<h1>方法、函数总结</h1>
<ul>
<li><code>length()</code></li>
<li><code>source()</code></li>
<li><code>pdf()</code></li>
<li><code>rnorm()</code></li>
<li><code>dev.off()</code></li>
<li><code>mode()</code></li>
<li><code>data()</code></li>
<li><code>mean()</code></li>
<li><code>sd()</code></li>
</ul>
</div>
