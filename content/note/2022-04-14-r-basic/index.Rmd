---
title: r
author: 王哲峰
date: '2022-04-14'
slug: r-basic
categories: 
  - r
tags:
  - tool
output:
  blogdown::html_page:
    toc: true
    fig_width: 6
    dev: "svg"
---

# R 运行

## 交互模式

``` r
source("file.R")
```

``` r
# file.R 中的代码
pdf("xh.pdf")
hist(rnorm(100))
dev.off()
```

## 批处理模式

``` bash
$ R CMD BATCH z.R
```

# R 基本类型

## 标量

* 标量，或单个的数，其实在 R 中并不存在，单个数实际上是一元向量

```{r}
x <- 8
x
```

## 向量

* 向量类型是 R 语言的核心。向量的元素必须属于某种“模式”(mode)
    - `mode()`
* 向量支持的操作
    - 数字索引
    - 名字索引(可用 `names()`)

### 创建向量

- `c`: concatenate 连接

```{r}
x <- c(1, 2, 3, 4)
x
```

### 向量索引

```{r}
x[1]
x[2:3]
```

### 向量计算

```{r}
mean(x)
sd(x)
```

## 字符串

* 字符串实际上是字符模式的单元素向量
* 字符串支持的操作
    - 数字索引
    - 字符串操作函数
    
```{r}
x <- c(5, 12, 13)
print(x)
length(x)
mode(x)
```

```{r}
y <- "abc"
print(y)
length(y)
mode(y)
```

```{r}
z <- c("abc", "29 88")
length(z)
mode(z)
```

### 字符串操作函数

* `paste()`
* `strsplit()`

```{r}
u <- paste("abc", "de", "f")
u
v <- strsplit(u, " ")
v
```

## 矩阵

## 列表


### 数据框



## 布尔类型

* `TRUE` or `T`
* `FALSE` or `F`


## 类型总结

| 类型   | 包含内容 | 可变性 | 序列操作  | 可嵌套 | 增长/缩短     | 方法调用 |
|--------|----------|--------|-----------|--------|---------------|----------|
| 数字   |          |        |           |        |               |          |
| string |          | 不可变 | 序列-有序 |        | 不可增长/缩短 | 可       |
| list   | 集合     | 可变   | 序列-有序 | 可嵌套 |               | 可       |
| dict   | 集合     | 可变   | 映射-无序 | 可嵌套 | 可增长/缩短   |          |
| tuple  | 集合     | 可变   | 序列-有序 | 可嵌套 | 可增长/缩短   |          |
| file   | 集合     | 可变   |           |        | 不可增长/缩短 | 不可     |

: R 类型

# R 基本操作

## 退出R

* Windows
    - `q()`
* Linux
    - `Ctrl-D`
* Mac
    - `Command-D`

## 运算符

* 求模(求余数)
    - `%%`
* 超赋值运算符(superassignment operator)
    - `<<-`
    - 在函数内部给全局变量赋值

## 索引

* 向量索引：从 1 开始


# R 函数

* R 语言编程的戒律之一就是尽可能避免使用循环，如果不能避免，就要让循环更简洁
* 在没有显式调用 `return` 时，R 语言的函数会返回最后计算的值，不过，这个方法必须慎重使用

```{r}
oodcount <- function(x) {
    k <- 0 # assign 0 to k
    for (n in x) {
        if (n %% 2 == 1) {
            k <- k + 1
        }
    }
    return(k)
}

oodcount(c(1, 3, 5))
oodcount(c(1, 2, 3, 7, 9))
```


# R 内置数据集

```{r}
data()
```

```{r}
mean(Nile)
sd(Nile)
hist(Nile)
```

# R 面向对象编程




# 方法、函数总结

* `length()`
* `source()`
* `pdf()`
* `rnorm()`
* `dev.off()`
* `mode()`
* `data()`
* `mean()`
* `sd()`